<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Description of unit tests of the secured_1d_velocity_controller package &mdash; secured_1d_velocity_controller 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=c2bf3912" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=d45e8c67"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Secure 1D Velocity Controller" href="../user_guide/secured_1d_velocity_controller.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            secured_1d_velocity_controller
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Quickstart</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/simple_example.html">A Simple Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/secured_1d_velocity_controller.html">Secure 1D Velocity Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/secured_1d_velocity_controller.html#secured-1d-velocity-controller-parameters">Secured 1d Velocity Controller Parameters</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Description of unit tests of the secured_1d_velocity_controller package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#launch-the-tests">Launch the tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tests-for-behavioral-correctness">Tests for behavioral correctness</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#test-if-limits-are-enforced-when-the-secure-mode-is-set-to-secure">Test if limits are enforced when the secure mode is set to <code class="docutils literal notranslate"><span class="pre">SECURE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-if-limits-are-ignored-when-the-secure-mode-is-set-to-insecure">Test if limits are ignored when the secure mode is set to <code class="docutils literal notranslate"><span class="pre">INSECURE</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#standard-ros2-control-tests">Standard ROS2 control tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#test-if-the-controller-can-be-loaded">Test if the controller can be loaded</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-if-all-controller-parameters-can-be-set">Test if all controller parameters can be set</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-if-the-controller-interfaces-are-correctly-exported">Test if the controller interfaces are correctly exported</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-if-the-controller-can-be-activated">Test if the controller can be activated</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-if-the-controller-update-method-does-not-crash">Test if the controller update method does not crash</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-if-the-controller-can-be-deactivated">Test if the controller can be deactivated</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-if-the-controller-can-be-reactivated">Test if the controller can be reactivated</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-if-the-controller-can-publish-its-status-correctly">Test if the controller can publish its status correctly</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-if-the-controller-can-receive-message-and-update-its-status-correctly">Test if the controller can receive message and update its status correctly</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">secured_1d_velocity_controller</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Description of unit tests of the secured_1d_velocity_controller package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer_guide/unit_testing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="description-of-unit-tests-of-the-secured-1d-velocity-controller-package">
<h1>Description of unit tests of the secured_1d_velocity_controller package<a class="headerlink" href="#description-of-unit-tests-of-the-secured-1d-velocity-controller-package" title="Link to this heading"></a></h1>
<section id="launch-the-tests">
<h2>Launch the tests<a class="headerlink" href="#launch-the-tests" title="Link to this heading"></a></h2>
<p>After installing and building the package (<a class="reference internal" href="../quickstart/installation.html#how-to-build-the-package"><span class="std std-ref">see the build section of the user guide</span></a>), you can launch the tests with the following command:</p>
<blockquote id="build-and-launch-the-tests">
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>colcon<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--ctest-args<span class="w"> </span>tests<span class="w"> </span>--packages-select<span class="w">  </span>secured_1d_velocity_controller
</pre></div>
</div>
</div></blockquote>
<p>You can see the results of the tests with the following command:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>colcon<span class="w"> </span>test-result<span class="w"> </span>--verbose<span class="w"> </span>--test-result-base<span class="w"> </span>build/secured_1d_velocity_controller
</pre></div>
</div>
</div></blockquote>
</section>
<hr class="docutils" />
<section id="tests-for-behavioral-correctness">
<h2>Tests for behavioral correctness<a class="headerlink" href="#tests-for-behavioral-correctness" title="Link to this heading"></a></h2>
<section id="test-if-limits-are-enforced-when-the-secure-mode-is-set-to-secure">
<h3>Test if limits are enforced when the secure mode is set to <code class="docutils literal notranslate"><span class="pre">SECURE</span></code><a class="headerlink" href="#test-if-limits-are-enforced-when-the-secure-mode-is-set-to-secure" title="Link to this heading"></a></h3>
<p>The test load the controller with the configuration file <code class="docutils literal notranslate"><span class="pre">test/secured_1d_velocity_controller_params.yaml</span></code> and set the secure mode to <code class="docutils literal notranslate"><span class="pre">SECURE</span></code>.</p>
<p>Then the test performs 2 tests:</p>
<ol class="arabic simple">
<li><p>The test mocks the start limit being activated.</p></li>
<li><p>A negative velocity command is sent to the controller.</p></li>
<li><p>It <strong>tests</strong> that a zero velocity command is sent to the controller.</p></li>
</ol>
<ol class="arabic simple">
<li><p>The test mocks the end limit being activated.</p></li>
<li><p>A positive velocity command is sent to the controller.</p></li>
<li><p>It <strong>tests</strong> that a zero velocity command is sent to the controller.</p></li>
</ol>
</section>
<section id="test-if-limits-are-ignored-when-the-secure-mode-is-set-to-insecure">
<h3>Test if limits are ignored when the secure mode is set to <code class="docutils literal notranslate"><span class="pre">INSECURE</span></code><a class="headerlink" href="#test-if-limits-are-ignored-when-the-secure-mode-is-set-to-insecure" title="Link to this heading"></a></h3>
<p>The test load the controller with the configuration file <code class="docutils literal notranslate"><span class="pre">test/secured_1d_velocity_controller_params.yaml</span></code> and set the secure mode to <code class="docutils literal notranslate"><span class="pre">INSECURE</span></code>.</p>
<p>Then the test performs 2 tests:</p>
<ol class="arabic simple">
<li><p>The test mocks the start limit being activated.</p></li>
<li><p>A negative velocity <span class="math notranslate nohighlight">\(\alpha\)</span> is sent to command the controller.</p></li>
<li><p>It <strong>tests</strong> that the velocity <span class="math notranslate nohighlight">\(\alpha\)</span> is sent to command the joint.</p></li>
</ol>
<ol class="arabic simple">
<li><p>The test mocks the end limit being activated.</p></li>
<li><p>A positive velocity <span class="math notranslate nohighlight">\(\alpha\)</span> is sent to command the controller.</p></li>
<li><p>It <strong>tests</strong> that the velocity <span class="math notranslate nohighlight">\(\alpha\)</span> is sent to command the joint.</p></li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="standard-ros2-control-tests">
<h2>Standard ROS2 control tests<a class="headerlink" href="#standard-ros2-control-tests" title="Link to this heading"></a></h2>
<section id="test-if-the-controller-can-be-loaded">
<h3>Test if the controller can be loaded<a class="headerlink" href="#test-if-the-controller-can-be-loaded" title="Link to this heading"></a></h3>
</section>
<section id="test-if-all-controller-parameters-can-be-set">
<h3>Test if all controller parameters can be set<a class="headerlink" href="#test-if-all-controller-parameters-can-be-set" title="Link to this heading"></a></h3>
<p>This test checks the <code class="docutils literal notranslate"><span class="pre">on_configure</span></code> stage.</p>
<p>It initializes the controller by defining its interfaces (commands and states).
The test action that are performed are the following:</p>
<ol class="arabic simple">
<li><p>it <strong>tests</strong> that before the controller is configured all its parameters are set to default values (e.g. empty strings, zeros, etc.);</p></li>
<li><p>it configures the controller with the example of configuration file (<cite>test/secured_1d_velocity_controller_params.yaml</cite>) with the <code class="docutils literal notranslate"><span class="pre">on_configure</span></code> method;</p></li>
<li><p>it <strong>tests</strong> that the controller can correctly pass the configure stage;</p></li>
<li><p>it <strong>tests</strong> that after the controller is configured all its parameters are set to the values defined in the configuration file.</p></li>
</ol>
</section>
<section id="test-if-the-controller-interfaces-are-correctly-exported">
<h3>Test if the controller interfaces are correctly exported<a class="headerlink" href="#test-if-the-controller-interfaces-are-correctly-exported" title="Link to this heading"></a></h3>
<p>It initializes the controller by defining its interfaces (commands and states)</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SetUpController</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_configure</span></code> method</p></li>
</ol>
<p>The test action that are performed are the following:</p>
<ol class="arabic simple">
<li><p>it <strong>tests</strong> that the controller can correctly pass the configure stage;</p></li>
<li><p>it gets the command interfaces after configuration;</p></li>
<li><p>it <strong>tests</strong> that the controller has the correct number of command interfaces;</p></li>
<li><p>it <strong>tests</strong> that the controller has the correct order and name for the vector of command interfaces;</p></li>
<li><p>it gets the state interfaces after configuration;</p></li>
<li><p>it <strong>tests</strong> that the controller has the correct number of state interfaces;</p></li>
<li><p>it <strong>tests</strong> that the controller has the correct order and name for the vector of state interfaces.</p></li>
</ol>
</section>
<section id="test-if-the-controller-can-be-activated">
<h3>Test if the controller can be activated<a class="headerlink" href="#test-if-the-controller-can-be-activated" title="Link to this heading"></a></h3>
<p>It initializes the controller by defining its interfaces (commands and states)</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SetUpController</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_configure</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_activate</span></code> method</p></li>
</ol>
<p>The test action that are performed are the following:</p>
<ol class="arabic simple">
<li><p>it <strong>tests</strong> that the controller can correctly pass the configure stage;</p></li>
<li><p>it <strong>tests</strong> that the controller can correctly pass the activate stage;</p></li>
<li><p>it <strong>tests</strong> that the velocity value in the controller reference is set to zero.</p></li>
</ol>
</section>
<section id="test-if-the-controller-update-method-does-not-crash">
<h3>Test if the controller update method does not crash<a class="headerlink" href="#test-if-the-controller-update-method-does-not-crash" title="Link to this heading"></a></h3>
<p>This test call the <code class="docutils literal notranslate"><span class="pre">update</span></code> method of the controller. The most important method that convert the reference command to the control command.
This test does not check the correctness of the control command, but only if the method does not crash and returns the correct return code.</p>
<p>It initializes the controller by defining its interfaces (commands and states)</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SetUpController</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_configure</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_activate</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">update</span></code> method</p></li>
</ol>
<p>The test action that are performed are the following:</p>
<ol class="arabic simple">
<li><p>it <strong>tests</strong> that the controller can correctly pass the configure stage;</p></li>
<li><p>it <strong>tests</strong> that the controller can correctly pass the activate stage;</p></li>
<li><p>it <strong>tests</strong> that the return code of the update method is correct;</p></li>
</ol>
</section>
<section id="test-if-the-controller-can-be-deactivated">
<h3>Test if the controller can be deactivated<a class="headerlink" href="#test-if-the-controller-can-be-deactivated" title="Link to this heading"></a></h3>
<p>It initializes the controller by defining its interfaces (commands and states)</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SetUpController</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_configure</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_activate</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_deactivate</span></code> method</p></li>
</ol>
<p>The test action that are performed are the following:</p>
<ol class="arabic simple">
<li><p>it <strong>tests</strong> that the controller can correctly pass the configure stage;</p></li>
<li><p>it <strong>tests</strong> that the controller can correctly pass the activate stage;</p></li>
<li><p>it <strong>tests</strong> that the controller can correctly pass the deactivate stage;</p></li>
</ol>
</section>
<section id="test-if-the-controller-can-be-reactivated">
<h3>Test if the controller can be reactivated<a class="headerlink" href="#test-if-the-controller-can-be-reactivated" title="Link to this heading"></a></h3>
<p>It initializes the controller by defining its interfaces (commands and states)</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SetUpController</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_configure</span></code> method</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_activate</span></code> method</p></li>
<li><p>Get the first command interface value after activation</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_deactivate</span></code> method</p></li>
<li><p>Get the first command interface value after deactivation</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">on_activate</span></code> method</p></li>
<li><p>Get the first command interface value after reactivation</p></li>
<li><p>call the <code class="docutils literal notranslate"><span class="pre">update</span></code> method</p></li>
</ol>
<p>The test action that are performed are the following:</p>
<ol class="arabic simple">
<li><p>it <strong>tests</strong> that the controller can correctly pass the configure stage;</p></li>
<li><p>it <strong>tests</strong> that the controller can correctly pass the activate stage;</p></li>
<li><p>it <strong>tests</strong> that the velocity command interface value is set to the reference command;</p></li>
<li><p>it <strong>tests</strong> that the controller can correctly pass the deactivate stage;</p></li>
<li><p>it <strong>tests</strong> that the velocity command interface value is set to nan;</p></li>
<li><p>it <strong>tests</strong> that the controller can correctly pass the activate stage;</p></li>
<li><p>it <strong>tests</strong> that the velocity command interface value is set to the zero;</p></li>
<li><p>it <strong>tests</strong> that the return code of the update method is correct;</p></li>
</ol>
</section>
<section id="test-if-the-controller-can-publish-its-status-correctly">
<h3>Test if the controller can publish its status correctly<a class="headerlink" href="#test-if-the-controller-can-publish-its-status-correctly" title="Link to this heading"></a></h3>
</section>
<section id="test-if-the-controller-can-receive-message-and-update-its-status-correctly">
<h3>Test if the controller can receive message and update its status correctly<a class="headerlink" href="#test-if-the-controller-can-receive-message-and-update-its-status-correctly" title="Link to this heading"></a></h3>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../user_guide/secured_1d_velocity_controller.html" class="btn btn-neutral float-left" title="Secure 1D Velocity Controller" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Manuel YGUEL.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>